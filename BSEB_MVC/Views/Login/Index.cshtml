@model BSEB_MVC.Models.UserMaster
@{
    Layout = null;
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>BSEB Login</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet" />
    <style>
        .right-section {
            background: white;
            padding: 28px 25px;
            border-radius: 16px;
            max-width: 450px;
            width: 90%;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);
            text-align: center;
        }

        .captcha-box {
            display: flex;
            gap: 8px;
            align-items: center;
            margin-bottom: 12px;
        }

        .btn-login {
            background-color: #1b2642;
            border: none;
            color: white;
            font-weight: 600;
            width: 100%;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 14px;
        }

            .btn-login:hover {
                background-color: #e66000;
            }
    </style>
</head>
<body>
    <div class="header text-center bg-dark text-white py-3">
        <strong>BIHAR SCHOOL EXAMINATION BOARD, PATNA</strong>
    </div>

    <div class="steps text-center bg-light py-2">
        Follow The Step: 1.Login → 2.Download Registration form → 3.Make Payment → 4.Payment Status Verification → 5.Fill Student Registration Form → 6.Display Registered Students → 7.Logout
    </div>

    <div class="d-flex justify-content-center align-items-center" style="height: calc(100vh - 100px);">
        <div class="right-section">
            <img src="~/img/bsebimage.jpg" class="logo mb-3" alt="Logo" width="60" />
            <h5>Bihar School Examination Board</h5>
            <p>Academic Year 2024–2026 Registration</p>
            <hr />
            <p><i class="fas fa-user"></i> Login to start your session</p>

            @using (Html.BeginForm("Index", "Login", FormMethod.Post, new { id = "loginForm" }))
            {
                @Html.ValidationSummary(true, "", new { @class = "text-danger" })

                <div class="mb-3 input-group">
                    <span class="input-group-text"><i class="fas fa-user"></i></span>
                    @Html.TextBoxFor(m => m.Username, new { @class = "form-control", placeholder = "Username" })
                </div>

                <div class="mb-3 input-group">
                    <span class="input-group-text"><i class="fas fa-lock"></i></span>
                    @Html.PasswordFor(m => m.Password, new { @class = "form-control", placeholder = "Password" })
                </div>

                <!-- CAPTCHA (client-side only) -->
                <div class="captcha-box">
                    <span id="num1">0</span> + <span id="num2">0</span> =
                    <input type="number" id="captchaInput" class="form-control" required />
                    <button type="button" class="btn btn-light btn-sm" onclick="generateCaptcha()">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
                <input type="hidden" id="captchaResult" />

                <button type="submit" class="btn btn-login">Login</button>
            }

            <div class="mt-3">
                <a href="StudentRegCardDownload.aspx" target="_blank">Download Student Registration Card</a>
            </div>
        </div>
    </div>

    <!-- JS for captcha -->
    <script>
        function generateCaptcha() {
            const n1 = Math.floor(Math.random() * 20) + 1;
            const n2 = Math.floor(Math.random() * 20) + 1;
            document.getElementById("num1").textContent = n1;
            document.getElementById("num2").textContent = n2;
            document.getElementById("captchaResult").value = n1 + n2;
            document.getElementById("captchaInput").value = '';
        }

        function validateCaptcha(event) {
            const expected = parseInt(document.getElementById("captchaResult").value);
            const actual = parseInt(document.getElementById("captchaInput").value);
            if (actual !== expected) {
                alert("Captcha incorrect. Try again.");
                generateCaptcha();
                event.preventDefault(); // prevent form submission
            }
        }

        document.getElementById("loginForm").addEventListener("submit", validateCaptcha);
        window.onload = generateCaptcha;
    </script>
</body>
</html>
